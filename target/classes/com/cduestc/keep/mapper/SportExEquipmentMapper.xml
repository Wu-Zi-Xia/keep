<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cduestc.keep.mapper.SportExEquipmentMapper">
    <resultMap id="BaseResultMap" type="com.cduestc.keep.model.SportEquipment">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Feb 15 21:07:37 CST 2020.
        -->
        <id column="equipment_ID" jdbcType="BIGINT" property="equipmentId" />
        <result column="equipment_name" jdbcType="CHAR" property="equipmentName" />
        <result column="image_url" jdbcType="VARCHAR" property="imageUrl" />
        <result column="equipment_tag" jdbcType="VARCHAR" property="equipmentTag" />
        <result column="brand" jdbcType="VARCHAR" property="brand" />
        <result column="price" jdbcType="INTEGER" property="price" />
        <result column="description" jdbcType="VARCHAR" property="description" />
    </resultMap>
    <select id="selectBySearch" parameterType="com.cduestc.keep.dto.SportsEquipmentQueryDto" resultMap="BaseResultMap">
        select *
        from sports_equipment
        <where>
            <if test="type !=null and type!= ''">
                equipment_tag=#{type}
            </if>
        </where>
        <where>
            <if test="search != null and search!= ''">
                and  equipment_name regexp #{search}
            </if>
        </where>
        limit #{page},#{size}
    </select>
    <select id="countAll" resultType="java.lang.Integer">
        select count (*) from  sports_equipment
    </select>
    <select id="countByTag" parameterType="java.lang.String">
        select count (*) from sports_equipment where equipment_tag=#{type}
    </select>
    <select id="selectSomethingByID" parameterType="java.lang.Long" resultType="com.cduestc.keep.dto.SportsEquipmentResultDto">
        select image_url,description,price from sports_equipment where id=#{id}
    </select>
</mapper>